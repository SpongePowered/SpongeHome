!function(e){var t=/(\s*\S+|\s)$/,n=/^(\S*)/;e.truncate=function(t,n){return e("<div></div>").append(t).truncate(n).html()},e.fn.truncate=function(r){e.isNumeric(r)&&(r={length:r});var a=e.extend({},e.truncate.defaults,r);return this.each(function(){var r=e(this);a.noBreaks&&r.find("br").replaceWith(" ");var i=r.text(),s=i.length-a.length;if(a.stripTags&&r.text(i),a.words&&s>0){var l=i.slice(0,a.length).replace(t,"").length;s=a.keepFirstWord&&0===l?i.length-n.exec(i)[0].length-1:i.length-l-1}0>s||!s&&!a.truncated||e.each(r.contents().get().reverse(),function(t,n){var r=e(n),i=r.text(),l=i.length;return s>=l?(a.truncated=!0,s-=l,void r.remove()):3===n.nodeType?(e(n.splitText(l-s-1)).replaceWith(a.ellipsis),!1):(r.truncate(e.extend(a,{length:l-s})),!1)})})},e.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,length:1/0,ellipsis:"â€¦"}}(jQuery);